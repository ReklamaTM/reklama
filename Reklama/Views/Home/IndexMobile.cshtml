@using System.Globalization
@model List<Domain.Entity.Realty.Realty>

@{
    ViewBag.Title = "IndexMobile";
    Layout = "~/Views/_Layout/_Mobile.cshtml";
}

<div class="bg-silver">
    <div class="main-header">
        <div class="btn-panel mb-2 mt-2 d-inline-block">
            <a href="@Url.Action("IndexMobile","Home")" class="btn btn-info" style="border-bottom-right-radius: 0; border-top-right-radius: 0;">Подписки</a>
            <a href="@Url.Action("FiltersMobile","Home")" class="btn btn-outline-info" style="border-bottom-left-radius: 0; border-top-left-radius: 0; margin-left: -4px">Фильтры</a>
        </div>
    </div>
    <div class="main-container">
        <div class="main-pub-items">
            @{var rnd = new Random(); }
            @foreach (var realty in Model)
            {
                var color = rnd.Next(1, 4);
                switch (color)
                {
                    case 1:
                        @:<div class="item blue">
                        @:<div class="bg blue"></div>
                            break;
                    case 2:
                        @:<div class="item purple">
                        @:<div class="bg purple"></div>
                        break;
                    case 3:
                        @:<div class="item green">
                        @:<div class="bg green"></div>
                        break;
                }

                <div class="img">
                    @if (realty.Photos.Count != 0)
                    {
                        <img src="@string.Concat("/", ProjectConfiguration.Get.FilePaths["realty_thumb"], "/", realty.Photos.OrderBy(x => x.CreatedAt).First().Link)" />
                    }
                    else
                    {
                        switch (color)
                        {
                            case 1:
                                <div class="icon-wrapper blue">
                                    <i class="fa fa-home fa-3x"></i>
                                </div>
                                break;
                            case 2:
                                <div class="icon-wrapper purple">
                                    <i class="fa fa-home fa-3x"></i>
                                </div>
                                break;
                            case 3:
                                <div class="icon-wrapper green">
                                    <i class="fa fa-home fa-3x"></i>
                                </div>
                                break;
                        }

                        @*<div class="icon-wrapper">
                                <i class="fa fa-home fa-4x"></i>
                            </div>*@
                        @*<img src="~/Images/System/no_photo_realty.png" />*@
                    }
                </div>
                <div class="info">
                    <p>
                        <i class="fa fa-map-marker"></i> @realty.City, @realty.Street
                    </p>
                    <p>
                        <i class="fa fa-cube"></i> 
                        @if (realty.FloorCount != null)
                        {
                            @realty.FloorCount <span> комн.квартира</span>
                        }
                        @if (realty.Square !=null)
                        {
                            <span>,</span> @realty.Square <span> кв.м</span>
                        }
                        @if (realty.Floor != null)
                        {
                            <span>,</span> @realty.Floor <span> эт.</span>
                        }
                    </p>
                    <p>
                        @if (realty.Currency != null && realty.Price != null)
                        {
                            <i class="fa fa-shopping-cart"></i> @Math.Round(((decimal)realty.Currency.Rate * realty.Price.Value), 2).ToString("0.#####", CultureInfo.InvariantCulture)
                        }
                        else
                        {
                            <i class="fa fa-shopping-cart"></i> <span>0</span>
                        }
                        <i class="fa fa-ruble-sign"></i>
                    </p>
                </div>
                @:</div>
}

        </div>
    </div>
</div>

@*<div class="row p-0" style="min-height: 100%">
        <div class="col-12 p-0" style="min-height: 100%">
            <div class="content-wrapper bg-blue h-100">
                <div class="logo-wrapper d-flex justify-content-center align-items-center">
                    <img class="img-logo" src="~/Images/logo.png" alt="reklama.tm" />
                </div>
                <a class="btn btn-lg btn-rounded btn-outline-info text-white mt-5" href="@Url.Action("Login", "Account")"><i class="fa fa-sign-in-alt"></i> Вход</a>
            </div>
        </div>
    </div>*@


